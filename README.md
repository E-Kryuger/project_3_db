# project_3_db

## –û–ø–∏—Å–∞–Ω–∏–µ
–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å API HeadHunter –∏ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL:
- –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–π—Ç–∏ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª–µ–π –∏ –≤–∞–∫–∞–Ω—Å–∏–∏
- –ü—Ä–æ–µ–∫—Ç–∏—Ä—É–µ—Ç —Ç–∞–±–ª–∏—Ü—ã –≤ `PostgreSQL` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–º–ø–∞–Ω–∏—è—Ö –∏ –≤–∞–∫–∞–Ω—Å–∏—è—Ö
- –†–∞–±–æ—Ç–∞–µ—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ —Å –ø–æ–º–æ—â—å—é –∫–ª–∞—Å—Å–∞ `DBManager`

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è —Å–ª–µ–¥—É—é—â–∏–µ –º–æ–¥—É–ª–∏:
- main.py
- **üóÄ get_api:**
  - get_vacancies_api.py
  - api_hh.py
- **üóÄ db_manager:**
  - db_manager.py
- **üóÄ utils:**
  - data_utils.py
  - db_utils.py
  - ile_utils.py
  - interaction_utils.py


### –û–±–∑–æ—Ä —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π:

#### main.py
–û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é —Ä–∞–±–æ—Ç—ã —Å –æ–±—ä–µ–∫—Ç–∞–º–∏.

#### üóÄ get_api / get_vacancies_api.py
–°–æ–¥–µ—Ä–∂–∏—Ç –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å `GetVacanciesAPI`. 
–≠—Ç–æ –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å, –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–ª–∞—Å—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —Ä–∞–∑–Ω—ã–º —Å–∞–π—Ç–∞–º –ø–æ API.
–í `GetVacanciesAPI` –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã, –Ω–æ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –º–µ—Ç–æ–¥—ã:
- `_connect_to_api`: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ API –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `get_data`: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ—Ç API HeadHunter

#### üóÄ get_api / api_hh.py
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –¥–æ—á–µ—Ä–Ω–∏–π –∫–ª–∞—Å—Å `HeadHunterAPI` –¥–ª—è `GetVacanciesAPI`. –ü—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API HeadHunter. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –º–µ—Ç–æ–¥—ã:
- `__init__`: –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–±—ä–µ–∫—Ç–∞, —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ —Å API
- `_connect_to_api`: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ API –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `__validate_id`: –í–∞–ª–∏–¥–∞—Ü–∏—è ID –∫–æ–º–ø–∞–Ω–∏–∏. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —Ü–µ–ª—ã–º —á–∏—Å–ª–æ–º.
- `__check_employer_id`: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è ID –∫–æ–º–ø–∞–Ω–∏–∏
- `__get_vacancies_by_id`: –ü–æ–∏—Å–∫ –≤–∞–∫–∞–Ω—Å–∏–π —É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–æ–º–ø–∞–Ω–∏–∏ –ø–æ –µ–µ ID
- `__get_employer_by_id`: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–º–ø–∞–Ω–∏–∏ –ø–æ –µ–µ ID
- `get_data`: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏—è—Ö –æ—Ç API HeadHunter

#### üóÄ db_manager / db_manager.py
–°–æ–¥–µ—Ä–∂–∏—Ç –∫–ª–∞—Å—Å `DBManager`. 
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –º–µ—Ç–æ–¥—ã:
- `__init__`: –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
- `_execute_query`: –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ë–î –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å
- `get_companies_and_vacancies_count`: –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–º–ø–∞–Ω–∏–π –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∞–∫–∞–Ω—Å–∏–π —É –∫–∞–∂–¥–æ–π –∫–æ–º–ø–∞–Ω–∏–∏
- `get_all_vacancies`: –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≤–∞–∫–∞–Ω—Å–∏–π —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏, –Ω–∞–∑–≤–∞–Ω–∏—è –≤–∞–∫–∞–Ω—Å–∏–∏, –∑–∞—Ä–ø–ª–∞—Ç—ã –∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ –≤–∞–∫–∞–Ω—Å–∏—é.
- `get_avg_salary`: –ü–æ–ª—É—á–∞–µ—Ç —Å—Ä–µ–¥–Ω—é—é –∑–∞—Ä–ø–ª–∞—Ç—É –ø–æ –≤—Å–µ–º –≤–∞–∫–∞–Ω—Å–∏—è–º
- `get_vacancies_with_higher_salary`: –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤–∞–∫–∞–Ω—Å–∏–π —Å –∑–∞—Ä–ø–ª–∞—Ç–æ–π –≤—ã—à–µ —Å—Ä–µ–¥–Ω–µ–π
- `get_vacancies_with_keyword`: –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≤–∞–∫–∞–Ω—Å–∏–π, –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ –∫–æ—Ç–æ—Ä—ã—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–µ –≤ –º–µ—Ç–æ–¥ —Å–ª–æ–≤–æ

#### üóÄ utils / data_utils.py
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏:
- `prepare_employers_data_to_insert`: –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞—Ö –∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—é –≤ –ë–î
- `prepare_vacancies_data_to_insert`: –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –≤–∞–∫–∞–Ω—Å–∏—è—Ö –∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—é –≤ –ë–î


#### üóÄ utils / db_utils.py
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏:
- `create_database`: –°–æ–∑–¥–∞–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –Ω–µ–π
- `insert_into_db`: –î–æ–±–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ë–î

#### üóÄ utils / file_utils.py
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏:
- `config`: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- `employer_ids`: –§—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞—é—â–∞—è —Å Json-—Ñ–∞–π–ª–∞–º–∏. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç ID —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª–µ–π –ø–æ –æ–¥–Ω–æ–º—É –≤ –≤–∏–¥–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞

#### üóÄ utils / interaction_utils.py
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏:
- `print_query_results`: –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–≤–æ–¥–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞ –≤ –∫–æ–Ω—Å–æ–ª—å
- `initialization_menu`: –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —É–∂–µ –∏–º–µ—é—Ç—Å—è –≤ –ë–î
- `main_menu`: –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–±–æ—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- `does_db_exist`: –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î
- LastRequestDate:
    - `__init__`: –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
    - `save`: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞—Ç—ã –∑–∞–ø—Ä–æ—Å–∞ –≤ —Ñ–∞–π–ª
    - `get`: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞—Ç—ã –∑–∞–ø—Ä–æ—Å–∞ –∏–∑ —Ñ–∞–π–ª–∞ –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏. –ï—Å–ª–∏ –¥–∞—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞.

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
| | –í–µ—Ä—Å–∏—è  |
|-- |---------|
|python | 3.12    |
|black | 24.10.0  |
|flake8 | 7.1.1   |
|isort | 5.13.2 |
|mypy |  1.13.0  |
|psycopg2 | 2.9.10  |
|pytest | 8.3.4   |
|pytest-cov| 5.0.0 |
|requests| 2.32.3 |
|tabulate| 0.9.0 |
|types-psycopg2|  2.9.21.20241019 |
|types-requests |  2.32.0.20241016 |
|types-tabulate|  0.9.0.20240106 |




## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```
https://github.com/E-Kryuger/Project_3_db.git
```
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```
poetry install
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–∞–∫–µ—Ç–∞ tests